<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive presentation: Confidence in the Presence of God by President Russell M. Nelson">
    <title>Confidence in the Presence of God - President Russell M. Nelson</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E‚úùÔ∏è%3C/text%3E%3C/svg%3E">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self' 'unsafe-inline' 'unsafe-eval' blob:;
        script-src 'self' https://cdnjs.cloudflare.com 'unsafe-inline' 'unsafe-eval';
        style-src 'self' https://cdnjs.cloudflare.com https://fonts.googleapis.com 'unsafe-inline';
        font-src 'self' https://fonts.gstatic.com https://fonts.googleapis.com data:;
        img-src 'self' data: https:;
        connect-src 'self';
    ">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">

    <!-- Performance Resource Hints -->
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Social Media Meta Tags -->
    <meta property="og:title" content="Confidence in the Presence of God - President Russell M. Nelson">
    <meta property="og:description" content="Interactive presentation exploring spiritual confidence through charity and virtue">
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Confidence in the Presence of God">
    <meta name="twitter:description" content="Interactive presentation exploring spiritual confidence through charity and virtue">

    <!-- PWA Meta -->
    <meta name="theme-color" content="#1E3A5F">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Reveal.js CSS -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.css"
          crossorigin="anonymous">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/theme/white.min.css"
          crossorigin="anonymous">

    <!-- AOS CSS -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
          integrity="sha512-1cK78a1o+ht2JcaW6g8OXYwqpev9+6GqOkz9xmBN9iUUhIndKtxwILGWYOSibOKjLsEdjyjZvYDq/cZwNeak0w=="
          crossorigin="anonymous">

    <!-- Google Fonts with Performance Optimization -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Open+Sans:wght@300;400;600&family=Crimson+Text:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    <style>
        /* Ensure font-display: swap for all fonts */
        @font-face {
            font-display: swap;
        }
    </style>

    <style>
        :root {
            --cream: #FAFAF8;
            --deep-blue: #1E3A5F;
            --gold: #C5A572;
            --light-blue: #4A6FA5;
            --soft-gold: #E6D5B8;
            --white: #FFFFFF;
        }

        body {
            background: var(--cream);
        }

        .reveal {
            font-family: 'Open Sans', sans-serif;
            color: var(--deep-blue);
        }

        .reveal h1, .reveal h2, .reveal h3 {
            font-family: 'Playfair Display', serif;
            color: var(--deep-blue);
            text-transform: none;
            font-weight: 700;
        }

        .reveal h1 {
            font-size: 3em;
            margin-bottom: 0.5em;
        }

        .reveal h2 {
            font-size: 2.2em;
            margin-bottom: 0.8em;
        }

        .reveal h3 {
            font-size: 1.6em;
            margin-bottom: 0.6em;
        }

        .reveal .slides {
            text-align: left;
        }

        .reveal section {
            height: 100%;
            padding: 2em;
            background: var(--cream);
        }

        .reveal .slide-background {
            background: var(--cream);
        }

        /* Title Slide Styles */
        .title-slide {
            text-align: center !important;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, var(--deep-blue) 0%, var(--light-blue) 100%);
            color: var(--white) !important;
            position: relative;
            overflow: hidden;
        }

        .title-slide h1 {
            color: var(--white) !important;
            font-size: 3.5em;
            margin-bottom: 0.3em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            z-index: 2;
        }

        .title-slide .subtitle {
            font-size: 1.5em;
            color: var(--soft-gold);
            margin-bottom: 2em;
            font-family: 'Crimson Text', serif;
            z-index: 2;
        }

        .title-slide .author {
            font-size: 1.3em;
            color: var(--white);
            font-weight: 600;
            z-index: 2;
        }

        /* Light Breaking Through Clouds Effect */
        .light-rays {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
        }

        .light-ray {
            position: absolute;
            width: 200px;
            height: 100%;
            background: linear-gradient(to bottom,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.1) 50%,
                rgba(255, 255, 255, 0) 100%);
            transform-origin: top center;
            animation: rayShine 8s ease-in-out infinite;
        }

        .light-ray:nth-child(1) { left: 10%; animation-delay: 0s; }
        .light-ray:nth-child(2) { left: 30%; animation-delay: 2s; }
        .light-ray:nth-child(3) { left: 50%; animation-delay: 4s; }
        .light-ray:nth-child(4) { left: 70%; animation-delay: 6s; }
        .light-ray:nth-child(5) { left: 90%; animation-delay: 1s; }

        @keyframes rayShine {
            0%, 100% { opacity: 0.3; transform: scaleY(0.8); }
            50% { opacity: 0.6; transform: scaleY(1.2); }
        }

        /* Quote Styles */
        .quote-box {
            background: var(--white);
            padding: 2em;
            border-left: 5px solid var(--gold);
            margin: 1.5em 0;
            font-family: 'Crimson Text', serif;
            font-style: italic;
            font-size: 1.3em;
            line-height: 1.6;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 5px;
        }

        .quote-box.scripture {
            border-left-color: var(--light-blue);
            background: linear-gradient(to right, rgba(74, 111, 165, 0.05) 0%, var(--white) 100%);
        }

        /* Statistics Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2em;
            margin: 2em 0;
        }

        .stat-card {
            background: var(--white);
            padding: 2em;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .stat-number {
            font-size: 3em;
            font-weight: 700;
            color: var(--gold);
            font-family: 'Playfair Display', serif;
        }

        .stat-label {
            font-size: 1.1em;
            color: var(--deep-blue);
            margin-top: 0.5em;
        }

        /* Key Points List */
        .key-points {
            list-style: none;
            padding: 0;
            margin: 1.5em 0;
        }

        .key-points li {
            padding: 1em 1em 1em 3em;
            margin: 1em 0;
            background: var(--white);
            border-radius: 8px;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            font-size: 1.1em;
            line-height: 1.6;
        }

        .key-points li:before {
            content: "‚ú¶";
            position: absolute;
            left: 1em;
            color: var(--gold);
            font-size: 1.5em;
        }

        /* Key Unlock Animation Container */
        .key-container {
            position: relative;
            margin: 2em auto;
            text-align: center;
        }

        .key-visual {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }

        .key-icon {
            width: 100px;
            height: 100px;
            fill: var(--gold);
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
            transition: transform 0.3s ease;
        }

        .key-visual:hover .key-icon {
            transform: scale(1.1) rotate(10deg);
        }

        .lock-icon {
            width: 80px;
            height: 80px;
            fill: var(--deep-blue);
            opacity: 0.8;
        }

        .unlock-text {
            margin-top: 1em;
            font-size: 1.2em;
            color: var(--gold);
            font-weight: 600;
        }

        /* Heart Filling Animation */
        .heart-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 2em auto;
            cursor: pointer;
        }

        .heart-outline {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .heart-fill {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            clip-path: polygon(0 100%, 100% 100%, 100% 100%, 0 100%);
            transition: clip-path 2s ease-in-out;
        }

        .heart-fill.filled {
            clip-path: polygon(0 100%, 100% 100%, 100% 0, 0 0);
        }

        /* Ripple Effect */
        .ripple-container {
            position: relative;
            display: inline-block;
            margin: 2em;
        }

        .ripple-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: var(--light-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
            cursor: pointer;
            position: relative;
            overflow: visible;
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(74, 111, 165, 0.4);
            width: 150px;
            height: 150px;
            animation: rippleEffect 1.5s ease-out;
            pointer-events: none;
        }

        @keyframes rippleEffect {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(2.5);
                opacity: 0;
            }
        }

        /* Thought Transformer */
        .thought-transformer {
            background: var(--white);
            padding: 2em;
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            margin: 2em 0;
        }

        .thought-card {
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            padding: 1.5em;
            border-radius: 10px;
            margin: 1em 0;
            cursor: pointer;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .thought-card.transformed {
            background: linear-gradient(135deg, var(--soft-gold) 0%, var(--gold) 100%);
            color: var(--white);
        }

        .thought-text {
            font-size: 1.2em;
            text-align: center;
            font-weight: 600;
        }

        .transform-icon {
            position: absolute;
            right: 1em;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5em;
            opacity: 0.6;
        }

        /* Typewriter Effect */
        .typewriter {
            overflow: hidden;
            border-right: 0.15em solid var(--gold);
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: 0.05em;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: var(--gold); }
        }

        /* Contrast Visual */
        .contrast-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2em;
            margin: 2em 0;
        }

        .contrast-box {
            padding: 2em;
            border-radius: 10px;
            text-align: center;
        }

        .contrast-box.negative {
            background: linear-gradient(135deg, #505050 0%, #303030 100%);
            color: var(--white);
        }

        .contrast-box.positive {
            background: linear-gradient(135deg, var(--gold) 0%, var(--soft-gold) 100%);
            color: var(--deep-blue);
        }

        .contrast-icon {
            font-size: 3em;
            margin-bottom: 0.5em;
        }

        /* Temple Visual */
        .temple-visual {
            text-align: center;
            margin: 2em 0;
        }

        .temple-icon {
            font-size: 5em;
            color: var(--gold);
            margin-bottom: 0.5em;
        }

        /* Call to Action */
        .cta-box {
            background: linear-gradient(135deg, var(--deep-blue) 0%, var(--light-blue) 100%);
            color: var(--white);
            padding: 3em;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .cta-box h2 {
            color: var(--white) !important;
            margin-bottom: 1em;
        }

        .cta-box p {
            font-size: 1.3em;
            line-height: 1.8;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .reveal h1 { font-size: 2em; }
            .reveal h2 { font-size: 1.6em; }
            .reveal h3 { font-size: 1.3em; }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .contrast-container {
                grid-template-columns: 1fr;
            }

            .quote-box {
                font-size: 1.1em;
                padding: 1.5em;
            }

            .reveal section {
                padding: 1em;
            }
        }

        /* Enhanced Responsive Design - Additional Breakpoints */
        @media (max-width: 1024px) {
            .reveal h1 { font-size: 2.2em; }
            .reveal h2 { font-size: 1.8em; }
            .quote-box { font-size: 1.1em; }
        }

        @media (max-width: 480px) {
            .reveal h1 { font-size: 1.6em; }
            .reveal h2 { font-size: 1.3em; }
            .reveal h3 { font-size: 1.1em; }

            .quote-box {
                font-size: 0.95em;
                padding: 1.2em;
                line-height: 1.5;
            }

            .stat-card .number { font-size: 1.8em; }
            .key-points li { font-size: 0.9em; }

            .reveal section { padding: 0.8em; }
        }

        /* Critical Overflow Fixes */
        .quote-box {
            font-size: 1.15em !important;
            line-height: 1.5 !important;
            padding: 1.5em !important;
        }

        .cta-box {
            padding: 2em !important;
        }

        .cta-box p {
            font-size: 1.15em !important;
            line-height: 1.6 !important;
        }

        .key-points li {
            font-size: 1em !important;
            line-height: 1.5 !important;
        }

        .stat-card {
            min-width: 280px !important;
        }

        .stat-card .number {
            font-size: 2.5em !important;
        }

        .stat-card .label {
            font-size: 1em !important;
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Custom Progress Bar */
        .reveal .progress {
            background: rgba(30, 58, 95, 0.2);
            height: 5px;
        }

        .reveal .progress span {
            background: var(--gold);
        }

        /* Navigation Controls */
        .reveal .controls {
            color: var(--gold);
        }

        /* Slide Number */
        .reveal .slide-number {
            color: var(--deep-blue);
            background: rgba(250, 250, 248, 0.8);
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">

            <!-- Slide 1: Title Slide -->
            <section class="title-slide" data-background-gradient="linear-gradient(135deg, #1E3A5F 0%, #4A6FA5 100%)">
                <div class="light-rays" aria-hidden="true">
                    <div class="light-ray"></div>
                    <div class="light-ray"></div>
                    <div class="light-ray"></div>
                    <div class="light-ray"></div>
                    <div class="light-ray"></div>
                </div>
                <h1 data-aos="fade-down" data-aos-duration="1000">Confidence in the Presence of God</h1>
                <p class="subtitle" data-aos="fade-up" data-aos-delay="300" data-aos-duration="1000">
                    Let virtue garnish thy thoughts unceasingly
                </p>
                <p class="author" data-aos="fade-up" data-aos-delay="600" data-aos-duration="1000">
                    President Russell M. Nelson
                </p>
            </section>

            <!-- Slide 2: A Day of Great Momentum -->
            <section>
                <h2 data-aos="fade-right">A Day of Great Momentum</h2>
                <div class="stats-grid">
                    <div class="stat-card" data-aos="zoom-in" data-aos-delay="100">
                        <div class="stat-number">550,000+</div>
                        <div class="stat-label">Children and Youth Blessed This Year</div>
                    </div>
                    <div class="stat-card" data-aos="zoom-in" data-aos-delay="300">
                        <div class="stat-number">Thousands</div>
                        <div class="stat-label">Full-Time Missionaries Serving</div>
                    </div>
                    <div class="stat-card" data-aos="zoom-in" data-aos-delay="500">
                        <div class="stat-number">169</div>
                        <div class="stat-label">Operating Temples Worldwide</div>
                    </div>
                </div>
                <p data-aos="fade-up" data-aos-delay="700" style="font-size: 1.2em; margin-top: 1.5em; text-align: center;">
                    "What a day of great momentum this is in the gathering of Israel!"
                </p>
            </section>

            <!-- Slide 3: The Challenge We All Face -->
            <section>
                <h2 data-aos="fade-right">The Challenge We All Face</h2>
                <div class="quote-box" data-aos="fade-up" data-aos-delay="200">
                    Each person living on planet Earth faces opposition, heartache, and various forms of affliction. Together we endure sickness, pandemic, natural disasters, conflicts, and wars.
                </div>
                <ul class="key-points" data-aos="fade-up" data-aos-delay="400">
                    <li>Life brings inevitable challenges and opposition</li>
                    <li>Afflictions come in many forms</li>
                    <li>We all need strength beyond our own</li>
                    <li>Worldly confidence isn't enough</li>
                </ul>
            </section>

            <!-- Slide 4: A Different Kind of Confidence -->
            <section>
                <h2 data-aos="fade-right">A Different Kind of Confidence</h2>
                <div style="text-align: center; margin: 2em 0;">
                    <div style="font-size: 4em; color: var(--gold);" data-aos="zoom-in">‚ö°</div>
                </div>
                <div class="quote-box" data-aos="fade-up" data-aos-delay="300">
                    This kind of confidence is not a feeling of superiority over others. Instead, it is a quiet, inner assurance that you are right with God.
                </div>
                <p data-aos="fade-up" data-aos-delay="500" style="font-size: 1.2em; margin-top: 1.5em; text-align: center;">
                    <strong>Spirit-born confidence</strong> comes from knowing you're aligned with God's will
                </p>
            </section>

            <!-- Slide 5: What This Confidence Means -->
            <section>
                <h2 data-aos="fade-right">What This Confidence Means</h2>
                <ul class="key-points">
                    <li data-aos="fade-right" data-aos-delay="100">It is knowing you are striving to become a true disciple of Jesus Christ</li>
                    <li data-aos="fade-right" data-aos-delay="250">It is feeling the influence and approval of the Holy Ghost</li>
                    <li data-aos="fade-right" data-aos-delay="400">It is the quiet assurance that your life is in harmony with God's will</li>
                    <li data-aos="fade-right" data-aos-delay="550">It comes from humbly seeking to follow the Savior</li>
                    <li data-aos="fade-right" data-aos-delay="700">It means feeling at peace despite life's storms</li>
                </ul>
            </section>

            <!-- Slide 6: The Key - God's Own Words -->
            <section>
                <h2 data-aos="fade-right">The Key: God's Own Words</h2>

                <div class="key-container">
                    <div class="key-visual" id="keyUnlock" onclick="unlockKey()" role="button" aria-label="Click to unlock the scripture" tabindex="0">
                        <svg class="lock-icon" id="lockIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M12 2C9.243 2 7 4.243 7 7v3H6c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-8c0-1.103-.897-2-2-2h-1V7c0-2.757-2.243-5-5-5zm-3 5c0-1.654 1.346-3 3-3s3 1.346 3 3v3H9V7z"/>
                        </svg>
                        <svg class="key-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M7 10h2v2H7zm0 4h2v2H7zm4-4h2v2h-2zm0 4h2v2h-2zm4-4h2v2h-2zm0 4h2v2h-2z"/>
                            <path d="M20 5h-1V3c0-1.103-.897-2-2-2H7C5.897 1 5 1.897 5 3v2H4C2.897 5 2 5.897 2 7v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V7c0-1.103-.897-2-2-2zM7 3h10v2H7V3z"/>
                        </svg>
                        <div class="unlock-text">Click to unlock the scripture</div>
                    </div>
                </div>

                <div class="quote-box scripture" id="scriptureQuote" style="opacity: 0; transform: scale(0.9); transition: all 0.8s ease;">
                    Let thy bowels also be full of charity towards all men, and to the household of faith, and let virtue garnish thy thoughts unceasingly; then shall thy confidence wax strong in the presence of God.
                    <div style="text-align: right; margin-top: 1em; font-weight: 600; color: var(--deep-blue);">
                        ‚Äî Doctrine and Covenants 121:45
                    </div>
                </div>
            </section>

            <!-- Slide 7: Charity - The Foundation -->
            <section>
                <h2 data-aos="fade-right">Charity: The Foundation</h2>

                <div style="display: flex; justify-content: center; gap: 2em; flex-wrap: wrap; margin: 2em 0;">
                    <div class="ripple-container">
                        <div class="ripple-circle" onclick="createRipple(this)">
                            <span>Peacemaking</span>
                        </div>
                    </div>
                    <div class="ripple-container">
                        <div class="ripple-circle" onclick="createRipple(this)">
                            <span>Kindness</span>
                        </div>
                    </div>
                    <div class="ripple-container">
                        <div class="ripple-circle" onclick="createRipple(this)">
                            <span>Love</span>
                        </div>
                    </div>
                </div>

                <div class="quote-box" data-aos="fade-up">
                    Anger never persuades. Hostility builds no one. Contention never leads to inspired solutions.
                </div>
            </section>

            <!-- Slide 8: The Alarming Reality -->
            <section>
                <h2 data-aos="fade-right">The Alarming Reality</h2>

                <div style="text-align: center; margin: 2em 0;">
                    <div style="font-size: 4em; margin-bottom: 0.5em;" data-aos="zoom-in">‚ö†Ô∏è</div>
                </div>

                <div class="quote-box" data-aos="fade-up" data-aos-delay="200">
                    The present hostility in public dialogue and on social media is alarming. Hateful words are deadly weapons that destroy people's faith and families, as well as nations and the moral foundations of society.
                </div>

                <p data-aos="fade-up" data-aos-delay="400" style="font-size: 1.2em; margin-top: 1.5em; text-align: center; font-weight: 600;">
                    We must be different. We must be peacemakers.
                </p>
            </section>

            <!-- Slide 9: Charity as Our Nature -->
            <section>
                <h2 data-aos="fade-right">Charity as Our Nature</h2>

                <div class="heart-container" onclick="fillHeart()" role="button" aria-label="Click to fill the heart with charity" tabindex="0">
                    <svg class="heart-outline" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="var(--deep-blue)" stroke-width="2">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                    <svg class="heart-fill" id="heartFill" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--gold)">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                </div>

                <p style="text-align: center; font-size: 1.1em; margin-top: 1em;">Click the heart to fill it with charity</p>

                <div class="quote-box" data-aos="fade-up">
                    As we seek the Lord's help to grow in charity, we will find our own hearts changing and our capacity to love increasing.
                </div>
            </section>

            <!-- Slide 10: Virtue - Enhancing Every Thought -->
            <section>
                <h2 data-aos="fade-right">Virtue: Enhancing Every Thought</h2>

                <div class="thought-transformer">
                    <p style="text-align: center; font-size: 1.2em; margin-bottom: 1.5em; font-weight: 600;">
                        Click each thought to transform it with virtue:
                    </p>

                    <div class="thought-card" onclick="transformThought(this, 'I\'m not good enough', 'I am a child of God with infinite worth')" role="button" tabindex="0">
                        <span class="thought-text">I'm not good enough</span>
                        <span class="transform-icon">‚Üí</span>
                    </div>

                    <div class="thought-card" onclick="transformThought(this, 'This is too hard', 'With God\'s help, I can do hard things')" role="button" tabindex="0">
                        <span class="thought-text">This is too hard</span>
                        <span class="transform-icon">‚Üí</span>
                    </div>

                    <div class="thought-card" onclick="transformThought(this, 'I\'m all alone', 'God is with me always, and I am surrounded by His love')" role="button" tabindex="0">
                        <span class="thought-text">I'm all alone</span>
                        <span class="transform-icon">‚Üí</span>
                    </div>
                </div>

                <div class="quote-box" data-aos="fade-up" style="margin-top: 1.5em;">
                    Imagine the boost you will receive to any positive thought when you enhance it with virtue. Virtue makes everything better and happier!
                </div>
            </section>

            <!-- Slide 11: Growing in Purity -->
            <section>
                <h2 data-aos="fade-right">Growing in Purity</h2>

                <div class="contrast-container">
                    <div class="contrast-box negative" data-aos="fade-right">
                        <div class="contrast-icon">üåë</div>
                        <h3 style="color: var(--white);">Impure Thoughts</h3>
                        <ul style="text-align: left; margin-top: 1em; list-style: none;">
                            <li>‚Ä¢ Darkness</li>
                            <li>‚Ä¢ Confusion</li>
                            <li>‚Ä¢ Shame</li>
                            <li>‚Ä¢ Separation from God</li>
                        </ul>
                    </div>

                    <div class="contrast-box positive" data-aos="fade-left">
                        <div class="contrast-icon">‚ú®</div>
                        <h3>Virtue & Purity</h3>
                        <ul style="text-align: left; margin-top: 1em; list-style: none;">
                            <li>‚Ä¢ Light and clarity</li>
                            <li>‚Ä¢ Peace of mind</li>
                            <li>‚Ä¢ Confidence</li>
                            <li>‚Ä¢ Closeness to God</li>
                        </ul>
                    </div>
                </div>

                <p data-aos="fade-up" style="font-size: 1.2em; margin-top: 1.5em; text-align: center; font-weight: 600;">
                    "Seek ye this Jesus of whom the prophets and apostles have testified"
                </p>
            </section>

            <!-- Slide 12: The Temple Connection -->
            <section>
                <h2 data-aos="fade-right">The Temple Connection</h2>

                <div class="temple-visual" data-aos="zoom-in">
                    <div class="temple-icon">üèõÔ∏è</div>
                </div>

                <div class="quote-box" data-aos="fade-up">
                    The house of the Lord is the best place to learn how to increase charity and virtue in our lives. Temple worship helps us become more like the Savior.
                </div>

                <ul class="key-points" data-aos="fade-up" data-aos-delay="300">
                    <li>Regular temple worship transforms us</li>
                    <li>We learn to see as God sees</li>
                    <li>We grow in charity and virtue naturally</li>
                    <li>Our confidence in God's presence increases</li>
                </ul>
            </section>

            <!-- Slide 13: The Promise - Call to Action -->
            <section>
                <div class="cta-box" data-aos="zoom-in">
                    <h2>The Promise</h2>

                    <div class="quote-box" style="background: rgba(255, 255, 255, 0.15); border-left-color: var(--gold); color: var(--white); margin: 1.5em 0;">
                        Let thy bowels also be full of charity towards all men, and to the household of faith, and let virtue garnish thy thoughts unceasingly; then shall thy confidence wax strong in the presence of God.
                    </div>

                    <div style="margin-top: 2em; font-size: 1.3em; line-height: 1.8;">
                        <p><strong>When we fill our lives with charity...</strong></p>
                        <p><strong>When we let virtue enhance our thoughts...</strong></p>
                        <p style="font-size: 1.4em; color: var(--gold); margin-top: 1em;">
                            <strong>Our confidence will wax strong in the presence of God</strong>
                        </p>
                    </div>

                    <p style="margin-top: 2em; font-style: italic; font-size: 1.1em;">
                        May we each seek this divine confidence through charity and virtue
                    </p>
                </div>
            </section>

        </div>
    </div>

    <!-- Reveal.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.js"
            crossorigin="anonymous"></script>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"
            crossorigin="anonymous"></script>

    <!-- AOS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"
            crossorigin="anonymous"></script>

    <script>
        // Wait for DOM and scripts to load
        document.addEventListener('DOMContentLoaded', function() {
            // Check if Reveal loaded
            if (typeof Reveal === 'undefined') {
                console.error('Reveal.js failed to load');
                document.body.innerHTML = '<div style="padding: 20px; text-align: center;"><h2>Loading presentation...</h2><p>If this persists, please refresh the page.</p></div>';
                return;
            }
            
            // Initialize Reveal.js
            Reveal.initialize({
            width: 1400,
            height: 900,
            margin: 0.05,
            minScale: 0.2,
            maxScale: 2.0,
            controls: true,
            progress: true,
            center: false,
            hash: true,
            transition: 'slide',
            transitionSpeed: 'default',
            backgroundTransition: 'fade',
            slideNumber: true,
            keyboard: true,
            overview: true,
            touch: true,
            loop: false,
            rtl: false,
            navigationMode: 'default',
            shuffle: false,
            fragments: true,
            fragmentInURL: true,
            embedded: false,
            help: true,
            showNotes: false,
            autoPlayMedia: null,
            preloadIframes: null,
            autoAnimate: true,
            autoAnimateMatcher: null,
            autoAnimateEasing: 'ease',
            autoAnimateDuration: 1.0,
            autoAnimateUnmatched: true,
            plugins: []
        });

        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: false,
            mirror: true
        });

        // Key Unlock Animation
        let keyUnlocked = false;
        function unlockKey() {
            if (keyUnlocked) return;

            const lockIcon = document.getElementById('lockIcon');
            const scriptureQuote = document.getElementById('scriptureQuote');
            const keyVisual = document.getElementById('keyUnlock');

            // Animate lock disappearing
            gsap.to(lockIcon, {
                opacity: 0,
                scale: 0.5,
                rotation: 90,
                duration: 0.8,
                ease: "power2.in"
            });

            // Animate key turning
            gsap.to(keyVisual.querySelector('.key-icon'), {
                rotation: 360,
                scale: 1.2,
                duration: 1,
                ease: "power2.out",
                onComplete: function() {
                    // Show scripture
                    gsap.to(scriptureQuote, {
                        opacity: 1,
                        scale: 1,
                        duration: 0.8,
                        ease: "back.out(1.7)"
                    });
                }
            });

            // Hide unlock text
            gsap.to(keyVisual.querySelector('.unlock-text'), {
                opacity: 0,
                duration: 0.5
            });

            keyUnlocked = true;
        }

        // Add keyboard support for key unlock
        document.getElementById('keyUnlock').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                unlockKey();
            }
        });

        // Heart Filling Animation
        let heartFilled = false;
        function fillHeart() {
            const heartFill = document.getElementById('heartFill');

            if (!heartFilled) {
                heartFill.classList.add('filled');

                // Add pulse animation
                gsap.fromTo('.heart-container',
                    { scale: 1 },
                    {
                        scale: 1.1,
                        duration: 0.3,
                        yoyo: true,
                        repeat: 1,
                        ease: "power2.inOut"
                    }
                );

                heartFilled = true;
            } else {
                heartFill.classList.remove('filled');
                heartFilled = false;
            }
        }

        // Add keyboard support for heart
        document.querySelector('.heart-container').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                fillHeart();
            }
        });

        // Ripple Effect
        function createRipple(element) {
            const ripple = document.createElement('div');
            ripple.classList.add('ripple');
            element.appendChild(ripple);

            setTimeout(() => {
                ripple.remove();
            }, 1500);

            // Add text animation
            gsap.fromTo(element.querySelector('span'),
                { scale: 1 },
                {
                    scale: 1.2,
                    duration: 0.3,
                    yoyo: true,
                    repeat: 1,
                    ease: "power2.inOut"
                }
            );
        }

        // Thought Transformer
        const transformedThoughts = new WeakSet();

        function transformThought(element, originalText, transformedText) {
            const thoughtText = element.querySelector('.thought-text');
            const transformIcon = element.querySelector('.transform-icon');

            if (!transformedThoughts.has(element)) {
                // Transform the thought
                element.classList.add('transformed');

                // Animate the transformation
                gsap.to(element, {
                    scale: 1.05,
                    duration: 0.3,
                    yoyo: true,
                    repeat: 1,
                    ease: "power2.inOut"
                });

                // Change text with fade
                gsap.to(thoughtText, {
                    opacity: 0,
                    duration: 0.3,
                    onComplete: function() {
                        thoughtText.textContent = transformedText;
                        gsap.to(thoughtText, {
                            opacity: 1,
                            duration: 0.3
                        });
                    }
                });

                // Change icon
                transformIcon.textContent = '‚úì';
                transformIcon.style.color = 'var(--white)';

                transformedThoughts.add(element);
            } else {
                // Revert the thought
                element.classList.remove('transformed');

                gsap.to(thoughtText, {
                    opacity: 0,
                    duration: 0.3,
                    onComplete: function() {
                        thoughtText.textContent = originalText;
                        gsap.to(thoughtText, {
                            opacity: 1,
                            duration: 0.3
                        });
                    }
                });

                transformIcon.textContent = '‚Üí';
                transformIcon.style.color = '';

                transformedThoughts.delete(element);
            }
        }

        // Add keyboard support for thought cards
        document.querySelectorAll('.thought-card').forEach(card => {
            card.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.click();
                }
            });
        });

        // Typewriter Effect (if needed for any dynamic text)
        function typeWriter(element, text, speed = 50) {
            let i = 0;
            element.textContent = '';

            function type() {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }

            type();
        }

        // Auto-refresh AOS on slide change
        Reveal.on('slidechanged', function(event) {
            AOS.refresh();
        });

        // Add entrance animations for specific slides
        Reveal.on('slidechanged', function(event) {
            const currentSlide = event.currentSlide;

            // Add special animations based on slide index
            if (event.indexh === 1) {
                // Stats slide - sequential animation
                const statCards = currentSlide.querySelectorAll('.stat-card');
                statCards.forEach((card, index) => {
                    gsap.fromTo(card,
                        { y: 50, opacity: 0 },
                        {
                            y: 0,
                            opacity: 1,
                            duration: 0.6,
                            delay: index * 0.2,
                            ease: "power2.out"
                        }
                    );
                });
            }
        });

        // Accessibility: Announce slide changes to screen readers
        Reveal.on('slidechanged', function(event) {
            const slideTitle = event.currentSlide.querySelector('h1, h2');
            if (slideTitle) {
                const announcement = document.createElement('div');
                announcement.className = 'sr-only';
                announcement.setAttribute('role', 'status');
                announcement.setAttribute('aria-live', 'polite');
                announcement.textContent = `Now showing: ${slideTitle.textContent}`;
                document.body.appendChild(announcement);

                setTimeout(() => {
                    announcement.remove();
                }, 1000);
            }
        });

        // Error handling for external libraries
        window.addEventListener('error', function(e) {
            console.error('An error occurred:', e.error);
            // Gracefully degrade if libraries fail to load
            if (typeof Reveal === 'undefined') {
                alert('Presentation library failed to load. Please check your internet connection and refresh the page.');
            }
        });

        // Ensure all animations work on mobile
        if ('ontouchstart' in window) {
            document.querySelectorAll('.ripple-circle, .heart-container, .thought-card, .key-visual').forEach(element => {
                element.style.cursor = 'pointer';
            });
        }

        // Print/PDF support
        if (window.location.search.match(/print-pdf/gi)) {
            const links = document.querySelectorAll('link[rel="stylesheet"]');
            links.forEach(link => {
                link.media = 'print';
            });
        }

        // Add smooth scroll behavior
        document.documentElement.style.scrollBehavior = 'smooth';

        console.log('‚úì Presentation initialized successfully');
        console.log('‚úì Interactive elements ready');
        console.log('‚úì Accessibility features enabled');
        });
    </script>
</body>
</html>